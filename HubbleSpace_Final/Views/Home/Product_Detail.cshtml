@model IEnumerable<HubbleSpace_Final.Entities.Img_Product>

@{
    ViewData["Title"] = "Details Page";
    Layout = "_FrontendLayout";
    var hostName = $"{Context.Request.Scheme}://{Context.Request.Host}";
}

@section SocialSeo{
    <meta property="og:title" content="@Model.FirstOrDefault().color_Product.product.Product_Name" />
    <meta property="og:description" content="@Model.FirstOrDefault().color_Product.product.Description" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="@hostName@Context.Request.Path" />
    <meta property="og:image" content="@hostName/Images/Product_Color_Image/@Model.FirstOrDefault().color_Product.product.Product_Name/@Model.FirstOrDefault().Photo" />
}
<!-- Load Facebook SDK for JavaScript -->
<div id="fb-root"></div>
<script>
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>



<div id="all">
    <div id="content">
        <div class="container">
            <div class="row">
                <!-- breadcrumb-->
                <div class="col-12" style="padding-right: 0">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="~/../Home">Home</a></li>
                            @{
                                var breadcrumb_item = Model.FirstOrDefault();
                                if (breadcrumb_item != null)
                                {
                                    <li class="breadcrumb-item"><a asp-action="Categories" asp-route-Object="@breadcrumb_item.color_Product.product.category.Object">@Html.DisplayFor(modelItem => breadcrumb_item.color_Product.product.category.Object)</a></li>
                                    <li class="breadcrumb-item"><a asp-action="Categories" asp-route-Object="@breadcrumb_item.color_Product.product.category.Object" asp-route-Name="@breadcrumb_item.color_Product.product.category.Category_Name">@Html.DisplayFor(modelItem => breadcrumb_item.color_Product.product.category.Category_Name)</a></li>
                                    <li aria-current="page" class="breadcrumb-item active">@Html.DisplayFor(modelItem => breadcrumb_item.color_Product.product.Product_Name)</li>
                                }
                            }
                        </ol>
                    </nav>
                </div>

                <!--ProductMain-->
                <div class="col-12">
                    <div id="productMain" class="row">

                        <!--product_slider-->
                        <div class="col-lg-8 col-md-6">
                            <div id="main-slider" class="owl-carousel owl-theme">
                                @foreach (var item in Model)
                                {
                                    <div class="item">
                                        <img src="~/Images/Product_Color_Image/@Html.DisplayFor(modelItem => item.color_Product.product.Product_Name)/@Html.DisplayFor(modelItem => item.Photo)" class="img-fluid owl-height">
                                    </div>
                                }
                            </div>
                            @{var product = Model.FirstOrDefault();
                                if (product != null)
                                {
                                    if (product.color_Product.product.Price_Sale < product.color_Product.product.Price_Product)
                                    {
                                        <!-- /.ribbon-->
                                        <div class="ribbon sale">
                                            <div class="theribbon">SALE</div>
                                            <div class="ribbon-background"></div>
                                        </div>
                                    }
                                    <!-- /.ribbon-->
                                    if (product.color_Product.Date > DateTime.Today.AddDays(-14))
                                    {
                                        <!-- /.ribbon-->
                                        <div class="ribbon new">
                                            <div class="theribbon">NEW</div>
                                            <div class="ribbon-background"></div>
                                        </div>
                                        <!-- /.ribbon-->
                                    }
                                }
                            }

                            <!--product_color-->
                            <div id="getcolor"></div>
                        </div>

                        <!--product_details-->
                        <div class="col-lg-4 col-md-6 box" style="margin-bottom: 0">
                            @if (product != null)
                            {
                                <h2>@Html.DisplayFor(modelItem => product.color_Product.product.Product_Name)</h2>
                                <h4><i>@Html.DisplayFor(modelItem => product.color_Product.Color_Name)</i></h4>
                                <i>@Html.DisplayFor(modelItem => product.color_Product.product.Description)</i>
                                <p class="price">
                                    <del>
                                        @if (product.color_Product.product.Price_Sale < product.color_Product.product.Price_Product)
                                        {
                                            <text> @String.Format("{0:0,0}", product.color_Product.product.Price_Product) VNĐ </text>
                                        }
                                    </del>
                                </p>
                                <p class="price-sale">
                                    <text> @String.Format("{0:0,0}", product.color_Product.product.Price_Sale) VNĐ </text>
                                </p>
                                <form asp-controller="Client_ProductCarts" asp-action="AddToCart" method="get">
                                    <input type="hidden" name="id" value="@product.ID_Color_Product" />
                                    <input type="hidden" name="name" value="@product.color_Product.product.Product_Name" />
                                    <input type="hidden" name="price" value="@product.color_Product.product.Price_Sale" />
                                    <div id="getsize" class="sizes" data-auto-id="@product.ID_Color_Product"></div>
                                    <p class="text-center buttons">
                                        <input type="submit" class="btn btn-primary" value="Add to cart" /><!--<i class="fa fa-shopping-cart"></i>-->
                                    </p>
                                </form>

                                <!-- /.Share in social-->
                                <!--
            div id="details" class="center">
            <h4>Show it to your friends</h4>
            <div class="social" data-href="https://localhost:44336/Home/Product_Detail/10" data-layout="button_count" data-size="small">
                <p style="text-align: center"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flocalhost%3A44336%2FHome%2FProduct_Detail%2F10&amp;src=sdkpreparse" class="external facebook"><i class="fa fa-facebook"></i></a><a href="#" class="external gplus"><i class="fa fa-google-plus"></i></a><a href="#" class="external twitter"><i class="fa fa-twitter"></i></a><a href="#" class="email"><i class="fa fa-envelope"></i></a></p>
            </div>
        </!--div>
        -->
                                <div class="fb-share-button" data-href="https://hubblespaceshoestore.azurewebsites.net/Home/Product_Detail/@Model.FirstOrDefault().color_Product.product.ID_Product" data-layout="button_count" data-size="large"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fhubblespaceshoestore.azurewebsites.net%2FHome%2FProduct_Detail%2F@Model.FirstOrDefault().color_Product.product.ID_Product&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Chia sẻ</a></div>
                            }
                        </div>
                    </div>


                    <!-- /.Recommend 4 product-->
                    <div id="getRecommendProducts" class="row">

                    </div>
                </div>
                <!-- /.col-md-9-->
            </div>
        </div>
    </div>
</div>
@{
    var ajax = Model.FirstOrDefault();
    if (ajax != null)
    {
        @section ajax{
            <script>
                $(function () {
                    $(document).ready(function () {
                        $.ajax({
                            url: "../GetSize",
                            data: {
                                "id": @Model.FirstOrDefault().ID_Color_Product,
                            },
                            success: function (response) {
                                $("#getsize").html(response)
                            }
                        });
                        $.ajax({
                            url: "../GetColor",
                            data: {
                                "id": @Model.FirstOrDefault().color_Product.product.ID_Product,
                            },
                            success: function (response) {
                                $("#getcolor").html(response)
                            }
                        });

                        $.ajax({
                            url: "../GetRecommendProducts",
                            data: {
                                "Object": "@Model.FirstOrDefault().color_Product.product.category.Object.ToString()",
                                "Name": "@Model.FirstOrDefault().color_Product.product.category.Category_Name.ToString()",
                                "Brand_Name": "@Model.FirstOrDefault().color_Product.product.Brand.Brand_Name.ToString()",
                            },
                            success: function (response) {
                                $("#getRecommendProducts").html(response)
                            }
                        });
                    });
                });
            </script>
        }
    }
}

